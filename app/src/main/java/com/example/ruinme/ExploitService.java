package com.example.ruinme;

import android.app.IntentService;
import android.app.WallpaperManager;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Build;
import android.os.Environment;
import android.os.VibrationEffect;
import android.os.Vibrator;

import java.io.IOException;

public class ExploitService extends IntentService {

    MediaPlayer rick_roll;
    AudioManager audioManager;

    public ExploitService() {
        super("ExploitService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        mnmnmnmnmnmnmnmnmnmn();
        rick_roll.start();
        int max = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);

//        WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
//        try {
//            myWallpaperManager.setResource(R.drawable.five);
//        } catch (IOException e) {
//        
//            e.printStackTrace();
//        }


        while(true) {
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, max, 0);
        }
    }

    @Override
    public void onCreate() {
        super.onCreate();
        rick_roll = MediaPlayer.create(this, R.raw.never_gonna_give_you_up);
        rick_roll.setLooping(true); // Set looping
        rick_roll.setVolume(100,100);

        audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

    }

    public void mnmnmnmnmnmnmnmnmnmn() {
        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        //               start at 0        .         -         .         .         .         -         .         -         .         .
        long[] times = new long[]{0, 400, 100, 800, 100, 400, 100, 400, 100, 400, 100, 800, 100, 400, 500, 800, 100, 400, 100, 400, 500};
        int[] amplitudes = new int[]{0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0};

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            v.vibrate(VibrationEffect.createWaveform(times, amplitudes,  0));
        }
    }
}
